<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>DnL Map</title>

		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
		<link href="css/literallycanvas.css" rel="stylesheet">

	    <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
	    <script src="//cdnjs.cloudflare.com/ajax/libs/react/0.14.7/react-with-addons.js"></script>
	    <script src="//cdnjs.cloudflare.com/ajax/libs/react/0.14.7/react-dom.js"></script>

	    <script src="js/literallycanvas.js"></script>
	</head>
	<body>

		<div class="dnl"></div>

		<form class="controls export">
			<input type="submit" data-action="export-as-png" value="Export as PNG">
		</form>

		<script>
		  $(document).ready(function() {
		    var backgroundImage = new Image()
		    backgroundImage.src = 'img/dnl_map.png';

		    var lc = LC.init(
		        document.getElementsByClassName('dnl')[0],
		        {
		          backgroundShapes: [
		            LC.createShape(
		              'Image', {x: 20, y: 20, image: backgroundImage, scale: 2}),
		            LC.createShape(
		              'Text', {
		                x: 200, y: 200, text: "I am in the background",
		                font: "bold 12px Helvetica"
		              })
		          ]
		        });
		    // the background image is not included in the shape list that is
		    // saved/loaded here
		    var localStorageKey = 'drawing-with-background'
		    if (localStorage.getItem(localStorageKey)) {
		      lc.loadSnapshotJSON(localStorage.getItem(localStorageKey));
		    }
		    lc.on('drawingChange', function() {
		      localStorage.setItem(localStorageKey, lc.getSnapshotJSON());
		    });
		    $('.controls.export [data-action=export-as-png]').click(function(e) {
		      e.preventDefault();
		      window.open(lc.getImage().toDataURL());
		    });
		  });
		</script>

	</body>
</html>
